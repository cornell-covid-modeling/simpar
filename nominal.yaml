metagroups:                     # list of the metagroups
  - "UG_on"
  - "UG_off"
  - "GR_on"
  - "GR_off"
  - "PR_on"
  - "PR_off"
  - "FS"

metagroup_names:                # names of metagroups
  UG_on: "On-Campus UG"
  UG_off: "Off-Campus UG"
  GR_on: "On-Campus Grad-Research"
  GR_off: "Off-Campus Grad-Research"
  PR_on: "On-Campus Professional"
  PR_off: "Off-Campus Professional"
  FS: "Employees"

population_count:               # population count (by meta group)
  UG_on: 7475     # [16250 * 0.46]
  UG_off: 8775    # [16250 * 0.54]
  GR_on: 87       # [7250 * 0.012]
  GR_off: 7163    # [7250 * 0.988]
  PR_on: 12       # [3000 * 0.004]
  PR_off: 2988    # [3000 * 0.996]
  FS: 10000

# The google sheet below works out these numbers, and also the number of people
# who will need to be isolated from the people infected over break with immunity
# that are not found in pre-departure testing and from the active infections
# that are found in arrival testing
# https://docs.google.com/spreadsheets/d/1bWOtKMsK4dBm47GPHWb3LhiPNuYlXFHvDr-f0BIv7IY/edit?usp=sharing

dec_surge_infections:
  UG_on: 874      # [1900 * 0.46]
  UG_off: 1026     # [1900 * 0.54]
  GR_on: 0
  GR_off: 0
  PR_on: 0
  PR_off: 0
  FS: 0

# @Brian Liu's analysis:
# 2506 UG students are infected and recover from 12/22/2021 - 1/25/2022
# Divide by 2 and scale by population size to get GR and VM/GM/LA.
# Take 15 per day for 40 days to get fac/staff
winter_break_infections:
  UG_on: "winter_break_infections_UG * 0.46" 
  UG_off: "winter_break_infections_UG * 0.54"
  GR_on: "winter_break_infections_GR * 0.04"
  GR_off: "winter_break_infections_GR * 0.96"
  PR_on: "winter_break_infections_PR * 0.01"
  PR_off: "winter_break_infections_PR * 0.99"
  FS: 600           # [15 * 40]

 # TODO: Possible changes based on new data? (bca44)

 # UG (total): 2200-2400, divide based on the % on campus and % off 
 # UG on campus: 1034-1128 (total * 0.47)
 # UG off campus: 1166- 1272 (total * 0.53)
 # 
 # GR total: 380-400 
 # GR on: 15 - 16 (*0.04)
 # GR off: 365-384 (*0.96)
 # 
 # PR total: 275-300
 # PR on: 3 - 3 (off by a fraction of a person) (*.01)
 # PR off: 272-297 (*0.99)

 # Reasoning: the lower bound numbers are the approx winter break 
 # occurring NAPs (outside of Cornell testing). 
 # In the Ug numbers, it seemed that there were more UG at risk that 
 # needed to return rather than NAPs. Normalizing these numbers (~ 5% 
 # after all the math), we expect about 2310. I added then an extra bound
 # for some flexibility. Grad populations have much fewer people who need to 
 # return, and it seems more NAPs need to return than at risk. I used the 
 # UG 5% number to get an upper bound instead of an estimate of the center. 
 # I could do this analysis a little more fine grained for UG off vs on campus
 # but I don't think it affects things much.

# @Brian Liu's analysis:
# 965 UG positives in the period 1/26/2022 - 2/7/2022
# Divide by 2 and scale by population size to get GR and VM/GM/LA.
# Take 15 per day for 3 days to get fac/staff
active_infections:
  UG_on: 444        # [965 * 0.46]
  UG_off: 521       # [965 * 0.54]
  GR_on: 3          # [(965/2) * (87/16250)]
  GR_off: 213       # [(965/2) * (7163/16250)]
  PR_on: 0          # [(965/2) * (12/16250)]
  PR_off: 89        # [(965/2) * (2988/16250)]
  FS: 45            # [15 * 3]

# @Yujia's analyis
# NOTE: This parameter is calibrated to a non-boosted population hence this
# is interpreted as non-boosted hospitalization rates.
hospitalization_rates:
  UG_on: 0.00025    # [1/4000]
  UG_off: 0.00025   # [1/4000]
  GR_on: 0.00025    # [1/4000]
  GR_off: 0.00025   # [1/4000]
  PR_on: 0.00025    # [1/4000]
  PR_off: 0.00025   # [1/4000]
  FS: 0.005         # [1/200]

# In the modeling team's spring 2021 projections, based on fall 2020 data, we estimated per-person
# outside infection rates of 1.42E-5 for the greek/athlete population, 7.11E-6 for other UG, and
# 6.45E-6 for graduate students.  During this period, we estimated 1.209 E-4 for faculty and staff.
# This puts the most social student population at about 1/10 of the employee rate per-person.
# Let's use this same rule of thumb for spring 2022, setting the student meta-groups to 1/10 of the
# employee per-person rate. With faculty and staff at 5 per day, this gives:
# - a UG number of 5*(16K/10K)/10 = 0.8
# - a GR number of 5*(8K/10K)/10 = 0.4
# - a PR number of 5*(3K/10K)/10 = 0.15
# NOTE: This parameter is calibrated to a non-boosted population hence this
# is interpreted as non-boosted outside rates.
outside_rates: #number of infections for each meta-group per day across the whole meta-group
  UG_on: "outside_rate_FS * outside_rate_post_peak_multiplier * 0.075"  # [(7475/10000)/10]
  UG_off: "outside_rate_FS * outside_rate_post_peak_multiplier * 0.088" # [(8775/10000)/10]
  GR_on: "outside_rate_FS * outside_rate_post_peak_multiplier * 0.0009" # [(87/10000)/10]
  GR_off: "outside_rate_FS * outside_rate_post_peak_multiplier * 0.07"  # [(7163/10000)/10]
  PR_on: "outside_rate_FS * outside_rate_post_peak_multiplier * 0.0001" # [(12/10000)/10]
  PR_off: "outside_rate_FS * outside_rate_post_peak_multiplier * 0.03"  # [(2988/10000)/10]
  FS: "outside_rate_FS * outside_rate_post_peak_multiplier"


# multiplier to apply to transmission once virtual instruction classwork makes students busy
# (after 3 generations / 12 days pass from the start of the simulation --- this is 7 pre-semester days and 5 days
# during virtual instruction )
classwork_transmission_multiplier:
  UG_on: "classwork_transmission_multiplier"
  UG_off: "classwork_transmission_multiplier"
  GR_on: 1      # we model them as not being affected by classwork
  GR_off: 1     # we model them as not being affected by classwork
  PR_on: "classwork_transmission_multiplier"
  PR_off: "classwork_transmission_multiplier"
  FS: 1         # we model them as not being affected by classwork

# Number of infections per day per (meta-group-specific contact unit).
# This is based on the following analysis:
#   @hwr26: calibration-student.py
#   @sst76: calibration-employee.py
# NOTE: This parameter is calibrated to a non-boosted population hence this
# is interpreted as non-boosted infections rates.
infections_per_day_per_contact_unit:
  UG_on: "infections_per_day_per_contact_unit_UG"
  UG_off: "infections_per_day_per_contact_unit_UG"
  GR_on: "infections_per_day_per_contact_unit_allGrad"
  GR_off: "infections_per_day_per_contact_unit_allGrad"
  PR_on: "infections_per_day_per_contact_unit_allGrad"
  PR_off: "infections_per_day_per_contact_unit_allGrad"
  FS: "infections_per_day_per_contact_unit_FS * omicron_transmission_multiplier"

T: 28                           # num generations (16 weeks with 4-day generations)

symptomatic_rate: "symptomatic_rate"

no_surveillance_test_rate: 0.01 # percent of the population tested in a generation
                                # (under no surveillance)

# The booster will have an effect on both transmissibility and susceptibility.
# This parameter captures the combined effect where we pessimistically assume
# there is no effect on transmissibility (multiplier of 1.0) and assume
# it halves the susceptibility (multiplier of 0.5) giving a combined 1.0 * 0.5
booster_multiplier: 0.5
booster_hospitalization_multiplier: "booster_hospitalization_multiplier"

booster_rate:                   # rate of booster vaccination
  UG_on: 1.0
  UG_off: 1.0
  GR_on: 1.0
  GR_off: 1.0
  PR_on: 1.0
  PR_off: 1.0
  FS: 1.0

generation_time: 4              # generation time (days)

# Define the isolation policy in use.
isolation_durations:            # durations of isolation (days)
  - 5
  - 10
isolation_fracs:                # fraction of pop falling into various isolation
  - 0.8                         # durations
  - 0.2

# A person is modeled as having constant infectiousness beginning some time
# after exposure and lasting an additional max_infectious_days. It is only during this
# infectious period that the infection is modeled as being detectable in PCR.
max_infectious_days: 6

# For each type of test, we include a parameter for the sensitivity during the
# infectious period (all tests are modelled as having zero sensitivity in the
# period between exposure and the start of the infectious period) and a
# parameter to indicate compliance with the test. In the case of antigen tests,
# students self-report and could be deceitful.
tests:
  pcr:
    sensitivity: "pcr_sensitivity"
    test_delay: 1.5
    compliance: "pcr_compliance"
  antigen:
    sensitivity: "antigen_sensitivity"
    test_delay: 0
    compliance: "antigen_compliance"

# This matrix encodes the amount of contact between metagroups
meta_matrix:
  UG_on:
    UG_on: 0.38417582
    UG_off: 0.45098901
    GR_on: 0.0003956
    GR_off: 0.03257143
    PR_on: 0.0002022
    PR_off: 0.05034725
    FS: 0.08131868132
  UG_off:
    UG_on: 0.38417582
    UG_off: 0.45098901
    GR_on: 0.0003956
    GR_off: 0.03257143
    PR_on: 0.0002022
    PR_off: 0.05034725
    FS: 0.08131868132
  GR_on:
    UG_on: 0.00935593
    UG_off: 0.01098305
    GR_on: 0.01151186
    GR_off: 0.94781017
    PR_on: 0.00008136
    PR_off: 0.02025763
    FS: 0.0
  GR_off:
    UG_on: 0.00935593
    UG_off: 0.01098305
    GR_on: 0.01151186
    GR_off: 0.94781017
    PR_on: 0.00008136
    PR_off: 0.02025763
    FS: 0.0
  PR_on:
    UG_on: 0.07519231
    UG_off: 0.08826923
    GR_on: 0.00126923
    GR_off: 0.1045
    PR_on: 0.00276923
    PR_off: 0.68953846
    FS: 0.03846153846
  PR_off:
    UG_on: 0.07519231
    UG_off: 0.08826923
    GR_on: 0.00126923
    GR_off: 0.1045
    PR_on: 0.00276923
    PR_off: 0.68953846
    FS: 0.03846153846
  FS:
    UG_on: 0.031625
    UG_off: 0.037125
    GR_on: 0.00015
    GR_off: 0.01235
    PR_on: 0.0002
    PR_off: 0.0498
    FS: 0.86875

# The distribution of social contacts are pulled from a Pareto distribution
# with the following parameter and truncated to the given maximum value. The
# fit distributions are based on Xiangyu's adjusted moment match code.
# Assumes that group i has i+1 contacts per day.
pop_fracs_pareto:
  UG_on: "pop_fracs_pareto_UG_on"
  UG_off: "pop_fracs_pareto_UG_off"
  GR_on: "pop_fracs_pareto_GR_on"
  GR_off: "pop_fracs_pareto_GR_off"
  PR_on: "pop_fracs_pareto_PR_on"
  PR_off: "pop_fracs_pareto_PR_off"
  FS: "pop_fracs_pareto_FS"

pop_fracs_max:
  UG_on: 9
  UG_off: 9
  GR_on: 10
  GR_off: 10
  PR_on: 10
  PR_off: 10
  FS: 11
