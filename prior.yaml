# Fraction of positive people that would be discovered as positive in the absence of regular required testing, shortly after their infection.
# As discussed in the spring 2022 modeling report in the "Probability of Detection without Regular Required Testing",
# we use a range of 22% to 56%, treating this as a 95% confidence interval for this parameter.
# This gives a mean of 0.39 and a standard deviation of .09.
# In the early-Jan nominal scenario, this parameter was estimated to be .525. This was based on
# an estimate of 35% as reporting symptoms, and then multiplying by 1.5 to account for contact tracing.
symptomatic_rate:
  scale: "linear"
  a: 0
  b: 1
  mu: 0.39
  std: 0.09

# Owner: Sam (@sst76)
# Calibrated using pareto-fitted pop_fracs.
# See calibration-employee.py in jan16_calib branch
# NOTE: This is calibrated to a pre-Omicron period so this should be multiplied
# by the [omicron_transmission_multiplier].
infections_per_day_per_contact_unit_FS:
  scale: "linear"
  a: 0        # must be positive
  b: .inf
  mu: 0.005
  std: 0.0025

# Owners: Sam (@sst76) and Bonnie (@bca44)
# TODO: Add explanation
omicron_transmission_multiplier:
  scale: "linear"
  a: 0   #must be positive
  b: .inf
  mu: 3.5
  std: 0.75

#Calibrated the student infections_per_day_per_contact_unit to the December Omicron outbreak
#slightly different than before since we are now using the pareto-fit pop_fras
#TODO: GR =/= PR whereas previously we manually set them equal. Still want to?
infections_per_day_per_contact_unit_UG:
  scale: "linear"
  a: 0        # must be positive
  b: .inf
  mu: 0.25
  std: 0.005

#Currently set GR and PR to have same transmissibility due to fall data
infections_per_day_per_contact_unit_allGrad:
  scale: "linear"
  a: 0        # must be positive
  b: .inf
  mu: 0.08
  std: 0.01

# Owner: Sam (@sst76)
# TODO [Sam], potentially incorporate calibrating outside_rate and infections_per... together
# derived from 82 outside infections from 1/7 to 1/14 inclusive with at least 2 daily checks
# since 1/4, vs 122 outside infections total from 1/7 to 1/14
# NOTE: This is calibrated to a pre-Omicron period so this should be multiplied
# by the [outside_rate_post_peak_multiplier].

# Comment from nominal.yaml to be moved here (if needed):
# @sst76 from observed 175 over 77 days in employees from 9/15 to 12/01, to give 2.27
# pf98 more recently we've see roughly 15 per day across the entire employee population
# Cutting this to 5 because by the time the semester starts new cases should be less frequent
outside_rate_FS:
  scale: "linear"
  a: 0      #must be positive
  b: .inf
  mu: 12.75
  std: 1.25

# Owner: Sam (@sst76)
# derived by using 2.27 as a lower bound for overall outside rate, which is the
# pre-omicron outside rate, and upper bound as no decrease in outside_rate
# e.g. 0.15 \approx 2.27/15.25 (where 15.25 is upper bound on outside_rate_FS)
outside_rate_post_peak_multiplier:
  scale: "linear"
  a: 0        #must be positive
  b: 1   # at most the same as peak omicron
  mu: 0.575
  std: 0.2125

#TODO [Sam], add parameter for uncertainty around student/FS proportions for outside_rate

# Owner: Peter (@pf98)
# TODO: Add explanation
classwork_transmission_multiplier:
  scale: "linear"
  a: 0
  b: 1
  mu: 0.85
  std: 0.075

# Owner: Bonnie (@bca44)
# Based on: https://www.nejm.org/doi/full/10.1056/NEJMoa2114255
# TODO (bca44): Correct this based on new research
# From meeting:
# - One option: lb: 1/4, ub: 1, mean: 1/2 on a logarithmic scale
booster_hospitalization_multiplier:
  scale: "log"
  a: -3.9     # [mu] - 2[std]
  b: -0.7     # [mu] + 2[std]
  mu: -2.30   # ln(1/10)
  std: 0.8    # exp(ln(1/10) + 2[std]) = 0.5

# Owner: Bonnie (@bca44)
# (bca44): We are using the same PCR sensitivity 
# range (50-70%, centered around 60%) as mentioned in the
# PNAS paper. These values are cited from here: 
# https://journals.asm.org/doi/pdf/10.1128/jcm.00995-20 
# Since Omicron has a slightly lower viral load than delta,
# we could also reduct PCR effectiveness slightly if desired
pcr_sensitivity:
  scale: "linear"
  a: 0.5
  b: 0.7
  mu: 0.6
  std: 0.05

# Owner: Bonnie (@bca44)
# During FA 2020, there was a period of time during which there were 
# no penalties for missed surveillance tests. Since there are 
# penalties for missing surveillance tests currently, and since PCR 
# tests are supervised, we can use our test compliance data from 
# FA 2020 to determine the percent PCR compliance. For most of the semester, 
# PCR compliance hovered slight above 95%. Thus, we will use a range of 
# 90-100% PCR compliance for SP 2022, centered around 95%.
pcr_compliance:
  scale: "linear"
  a: 0.9
  b: 1
  mu: 0.95
  std: 0.025

# Owner: Bonnie (@bca44)
# (bca44): Multiple recent publications discuss the sensitivity of 
# antigen tests for Omicron in relation to PCR tests. One article 
# (https://www.idsociety.org/covid-19-real-time-learning-network/diagnostics/rapid-testing/)
#cites that antigen tests are anywhere from 30-40% less sensitive than 
# PCR tests. This range would correspond to approximately 
# 30-50% sensitivity. Another study 
# (https://www.medrxiv.org/content/10.1101/2022.01.08.22268954v1) 
# reports tht anitgen tests in fully boostered
# populations (which approximately describes Cornell) have around 51%
# sensitivity (95% CI: 37-65% sensitivity). Thus, we use a range of 30-65% 
# antigen sensitivity, centered at 50%.

antigen_sensitivity:
  scale: "linear"
  a: 0.3
  b: 0.65
  mu: 0.5
  std: 0.05

# Owner: Bonnie (@bca44)
# (bca44): After polling various students from different 
# social circles and discussing factors that could be 
# detrimental to compliance, we determined that antigen compliance
# is approx. 50-80%, centered at 60%
antigen_compliance:
  scale: "linear"
  a: 0.5
  b: 0.8
  mu: 0.60
  std: 0.05

# Owner: Xiangyu (@xz556)
pop_fracs_pareto_UG_on:
  scale: "log"
  a:  0.01 # exp(mu - 2 std)
  b: 0.49  # exp(mu + 2 std)
  mu: -2.659260036932778
  std: 0.9729550745276565

pop_fracs_pareto_UG_off:
  scale: "log"
  a:  0.01 # exp(mu - 2 std)
  b: 0.49  # exp(mu + 2 std)
  mu: -2.659260036932778
  std: 0.9729550745276565

pop_fracs_pareto_GR_on:
  scale: "log"
  a:  0.01 # exp(mu - 2 std)
  b: 1.69  # exp(mu + 2 std)
  mu: -2.04022082
  std: 1.2824746787307681

pop_fracs_pareto_GR_off:
  scale: "log"
  a:  0.01 # exp(mu - 2 std)
  b: 1.69  # exp(mu + 2 std)
  mu: -2.04022082
  std: 1.2824746787307681

pop_fracs_pareto_PR_on:
  scale: "log"
  a:  0.01 # exp(mu - 2 std)
  b: 1.1605  # exp(mu + 2 std)
  mu: -2.228159619
  std: 1.188505283180111

pop_fracs_pareto_PR_off:
  scale: "log"
  a:  0.01 # exp(mu - 2 std)
  b: 1.1605  # exp(mu + 2 std)
  mu: -2.228159619
  std: 1.188505283180111

pop_fracs_pareto_FS:
  scale: "log"
  a: 0.37  # exp(mu - 2 std)
  b: 1.02  # exp(mu + 2 std)
  mu: -0.48722482302384357
  std: 0.25351372516001164